# Cloudflare Tunnel SSH Configuration for Staging
tunnel: ssh-access-staging
credentials-file: /etc/cloudflared/tunnel-staging.json

ingress:
  # SSH access via Access for Infrastructure
  - hostname: ssh.staging.empathyfirstmedia.com
    service: ssh://localhost:22
    originRequest:
      connectTimeout: 30s
      tlsTimeout: 30s
      tcpKeepAlive: 30s
      keepAliveTimeout: 90s
      keepAliveConnections: 100

  # Database access for staging
  - hostname: db.staging.empathyfirstmedia.com
    service: tcp://localhost:5432
    originRequest:
      connectTimeout: 30s

  # Health check
  - hostname: health.staging.empathyfirstmedia.com
    service: http://localhost:8787/health

  - service: http_status:404

# SSH Certificate Authority (update with your Cloudflare service token)
# service_token: op://Development/SSH_CA_Service_Token_Staging/token